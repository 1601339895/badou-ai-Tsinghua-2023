### 尺度不变特征变换（SIFT）
1. 问题引入
    1. 两张同一物体的不同角度的照片拼接成一个大照片
        1. 分别提取待拼接图片的特征点
        2. 拟合透视矩阵得到不同场景下的同一物体，进行叠放
    2. 找到物体关键点的算法——SIFT算法
2. SIFT（尺度不变特征变换）
    1. 全称：Scale Invariant Feature Transform
    2. 概念：Sift提取图像的局部特征，在尺度空间寻找极值点，并提取出其位置、尺度、方向信息，共3个方面
    3. 应用范围：物体辨别、机器人地图感知与导航、影像拼接、3D模型建立、手势识别、影像追踪等关键点检测场景
    4. 特点：
        1. 对视角变化、噪声等也存在一定程度的稳定性
            1. Sift所查找的关键点都是一些十分突出，不会因光照，仿射变换和噪声等因素而变换的“稳定”特征点，如角点、边缘点、暗区的亮点以及亮区的暗点等
        2. 独特性，信息量丰富，适用于在海量特征数据中进行快速，准确的匹配
        3. 多量性，即使少数几个物体也可以产生大量的 Sift 特征向量
        4. ！！！商用收费！！！，在opencv > 3.4.3中不再提供
    5. 步骤
        1. 生成高斯差分金字塔（DOG金字塔），尺度空间构建
            1. 尺度空间
                1. 与尺寸区分开，尺寸指的是512 * 512个像素点
                2. 目的：把图片弄成不同的分辨率，模拟人眼近大远小的效果
                3. 通俗地说，尺度空间，就相当于一个图片需要获得多少分辨率的量级。如果把一个图片从原始分辨率不停的对其分辨率进行减少，然后将这些图片摞在一起，可以看成一个四棱锥的样式，这个东西就叫做图像金字塔。
            2. 图像金字塔
                1. 多分辨率尺度解构一张图
                2. 高分辨率图像放在底部，塔尖上是1个像素点的图像
                3. 主要步骤：
                    1. 高斯滤波降噪，平滑图像
                    2. 对平滑图像进行抽象（采样）
                        1. 上采样：分辨率逐级升高
                        2. 下采样：分辨率逐级降低
                    3. 只能模拟近大远小
                4. 进化成高斯金字塔
                    1. 各尺度下图像的模糊度逐渐变大
                    2. 目的：模拟人眼远近模糊程度的变化
                    3. 是构建DOG金字塔构建的基础；DOG金字塔是尺度空间构建的基础
                    4. 概念：高斯金字塔并不是一个金字塔，而是有很多组（Octave）金字塔构成，并且每组金字塔都包含若干层（Interval）
                    5. 构建过程：
                        1. 先将原图像扩大一倍之后作为高斯金字塔的第1组第1层，将第1组第1层图像经高斯卷积之后作为第1组金字塔的第2层。
                        2. 将 σ(一般取1.6，经验数字) 乘以一个比例系数k，得到一个新的平滑因子σ=k*σ，用它来平滑第1组第2层图像，结果图像作为第3层。
                        3. 如此这般重复，最后得到L层图像，在同一组中，每一层图像的尺寸都是一样的，只是平滑系数不一样。它们对应的平滑系数分别为：0，σ，kσ，k^2σ,k^3σ……k^(L-2)σ。
                        4. 构建其他组
                            1. 前3步构建出了一组高斯金字塔。
                            2. 将第1组倒数第三层图像作比例因子为2的降采样（尺寸减半），得到的图像作为第2组的第1层，然后对第2组的第1层图像做平滑因子为σ的高斯平滑，得到第2组的第2层，就像步骤2中一样，如此得到第2组的L层图像，同组内它们的尺寸是一样的，对应的平滑系数分别为：0，σ，kσ，k^2σ,k^3σ……k^(L-2)σ。但是在尺寸方面第2组是第1组图像的一半。
                            3. 经过科学实验，倒数第三层的分辨率比较接近原图。
                        5. 反复执行4，一共得到O组，每组L层，共计O*L个图像，这些图像一起就构成了高斯金字塔
                    6. 特点：
                        1. 在同一组内，不同层图像的尺寸是一样的，后一层图像的高斯平滑因子σ是前一层图像平滑因子的k倍
                        2. 在不同组间，后一组第一个图像是前一组倒数第三个图像的二分之一采样，图像大小是前一组的一半
                    6. 构建尺度空间：坐标系(O，L)
                        1. 在高斯金字塔中一共生成O组L层不同尺度的图像，这两个量合起来（O，L）就构成了高斯金字塔的尺度空间
                        2. 以高斯金字塔的组O作为二维坐标系的一个坐标，不同层L作为另一个坐标，则给定的一组坐标（O,L）就可以唯一确定高斯金字塔中的一幅图像
                        3. 在计算机中以二维数组的形式存储
                    7. 算法原理：
                        1. SIFT算法在构建尺度空间时候采取高斯核函数进行滤波，使原始图像保存最多的细节特征，经过高斯滤波后细节特征逐渐减少来模拟大尺度情况下的特征表示。
                        2. 其实尺度空间图像生成就是当前图像与不同尺度核参数σ进行卷积运算后产生的图像
                5. 进化成高斯差分金字塔，即DOG（Difference of Gaussian）金字塔
                    1. 构建过程（相对简单）：
                        1. DOG金字塔的第1组第1层是由高斯金字塔的第1组第2层减第1组第1层得到的。以此类推，逐组逐层生成每一个差分图像，所有差分图像构成差分金字塔
                        2. 概括为DOG金字塔的第o组第l层图像是由高斯金字塔的第o组第l+1层减第o组第l层得到的
                        3. 说人话就是两两相减
                    2. 构建目的：
                        1. 找特征点/关键点：相同的点被减没了，即去掉不同情况下经过高斯模糊没有变化的点，这些点就是非特征值的点（卷积/滤波的本质是提取局部特征，高斯滤波本质提取的是边缘）
                    3. 得到的结果：
                        1. 人眼见到的是全黑图，但打印出矩阵的矩阵非全零矩阵
                        2. 归一化处理后可见轮廓特征，即SIFT找到的稳定特征（这一步不是算法需要的，只是为了给人看）
        2. 空间极值点检测（关键点的初步查探）——进一步的筛选，进行非极大值抑制NMS的过程
            1. 尺度空间极值检测——找极值
            2. 8邻域以及上下对应的9个点，共26个点比较，以确保在尺度空间和二维图像空间都检测到极值点。类似非极大值抑制NMS
            3. 一组中的第一层图和最后一层图的计算方法：再用高斯模糊，在高斯金字塔中多模糊出三张来凑数，所以在DOG中多出两张
                1. DOG金字塔上下各多一张，共多两张
                2. 高斯金字塔需要比DOG金字塔多一张（因为是做减法），所以高斯金字塔要多3张
            4. 高斯金字塔的k值设定：k = 2 ^ (1/s)
                1. s：每组图像中检测s个尺度的极值点。（实际计算时，s通常在3到5之间）
                2. s的意思是将来我们在差分高斯金字塔中求极值点的时候，我们要求s层点。
                3. 高斯金字塔共包含O组图像，每组图像有 s + 3 层，O = log2(min{M, N}) - 3 // M,N为原始图像的行数和列数
        3. 稳定关键点的精确定位（可选步骤）
            1. why：DOG值对噪声和边缘比较敏感，所以在第2步的尺度空间中检测到的局部极值点还要经过进一步的筛选，去除不稳定和错误检测出的极值点。
            2. how：利用阈值的方法来限制，在opencv中为contrastThreshold，人为设置此参数，如果值选取的不好会带来副作用
            3. 这一步并不是必要的，为了避免副作用可以跳过这一步
            4. 至此，SIFT特征的位置、尺度都找到了。
        4. 稳定关键点方向信息分配
            1. 方法：
                1. 获取关键点所在尺度空间的邻域，然后计算该区域的梯度和方向，根据计算得到的结果创建方向直方图。
                2. 直方图的峰值为主方向的参数，其他高于主方向80%的方向被判定为辅助方向，这里的80%也是可以根据需求改变的。
            2. 任一关键点的梯度公式：
                1. 梯度幅值（看起来很复杂的数学公式），y方向的差值与x方向差值的几何距离，勾股定理
                2. 梯度方向（看起来很复杂的数学公式），y方向的差值 / x方向的差值
        5. 关键点描述
            1. 要描述出来的东西(what)：位置、尺度、方向、周围对其有贡献的邻域点
            2. 如何描述(how)：4 * 4 * 8 共128维的向量描述中心关键点效果最有(由实验得出)（不变性与独特性）
            3. 至此完成了关键点描述，可以进行两张图的关键点匹配了
        6. 特征点匹配
            1. 特征点的匹配是通过计算两组特征点的128维的关键点的欧式距离实现的。
            2. 欧式距离越小，则相似度越高，当欧式距离小于设定的阈值时，可以判定为匹配成功。
            3. 步骤：
                1. 分别对模板图（参考图，reference image）和实时图（观测图，observation image）建立关键点描述子集合。目标的识别是通过两点集内关键点描述子的比对来完成。具有128维的关键点描述子的相似性度量采用欧式距离。
                2. 匹配可采取穷举法完成。
